import{j as u}from"./jsx-runtime-D_zvdyIk.js";import{r as a}from"./index-BCtMShv3.js";function E(e){const t=e.slice().sort((r,n)=>r.startMilliseconds-n.startMilliseconds);if(t.length===0)return{sortedElements:[],timelineDurationMilliseconds:0};const s=t[0].startMilliseconds,i=t[t.length-1].endMilliseconds||s;return{sortedElements:t,timelineDurationMilliseconds:i-s}}function o(e,t){return e.startMilliseconds+t*(e.endMilliseconds-e.startMilliseconds)}function m(e,t){return(t-e.startMilliseconds)/(e.endMilliseconds-e.startMilliseconds)}function f(e,t){const{sortedElements:s}=t,i=o(e,0),r=o(e,1);return s.filter(n=>n.startMilliseconds<r&&(n.endMilliseconds||n.startMilliseconds)>i)}function p(e){return{startMilliseconds:0,endMilliseconds:e,timelineDurationMilliseconds:e}}function g(e,t,s){console.assert(t>1,"factor must be greater than 1"),console.assert(s>=0&&s<=1,"x must be between 0 and 1");const i=o(e,s),r=(e.endMilliseconds-e.startMilliseconds)/t,n=Math.max(0,i-r/2);return{...e,startMilliseconds:Math.round(n),endMilliseconds:Math.round(n+r)}}function h(e,t,s){console.assert(t>1,"factor must be greater than 1"),console.assert(s>=0&&s<=1,"x must be between 0 and 1");const i=o(e,s),r=(e.endMilliseconds-e.startMilliseconds)*t,n=Math.max(0,i-r/2);return{...e,startMilliseconds:Math.round(n),endMilliseconds:Math.round(n+r)}}function T(e,t){return console.assert(t>=0,"milliseconds must be positive"),e.startMilliseconds-t<0?{...e,startMilliseconds:0,endMilliseconds:e.endMilliseconds-e.startMilliseconds}:{...e,startMilliseconds:e.startMilliseconds-t,endMilliseconds:e.endMilliseconds-t}}function L(e,t){return console.assert(t>=0,"milliseconds must be positive"),e.endMilliseconds+t>e.timelineDurationMilliseconds?{...e,startMilliseconds:e.timelineDurationMilliseconds-(e.endMilliseconds-e.startMilliseconds),endMilliseconds:e.timelineDurationMilliseconds}:{...e,startMilliseconds:e.startMilliseconds+t,endMilliseconds:e.endMilliseconds+t}}function y(e,t){return t<0?T(e,-t):L(e,t)}function _(e){return{...e,startMilliseconds:0,endMilliseconds:e.timelineDurationMilliseconds}}function b(e){return e.endMilliseconds-e.startMilliseconds}function N(e){return`${e.type}-${e.startMilliseconds}`}const M=a.createContext(void 0),c=({children:e,contentLength:t})=>{const[s,i]=a.useState(p(t));return u.jsx(M.Provider,{value:{lens:s,setLens:i},children:e})},l=1.1,x=()=>{const e=a.useContext(M);if(!e)throw new Error("useLens must be used within a TimelineProvider");return{timeToRelative(t){return m(e.lens,t)},relativeToTime(t){return o(e.lens,t)},pan(t){e.setLens(s=>y(s,t))},zoomIn(t){e.setLens(s=>g(s,l,t))},zoomOut(t){e.setLens(s=>h(s,l,t))},reset(){e.setLens(t=>_(t))},getVisibleElements(t){return f(e.lens,t)},getLength(){return b(e.lens)},debug(){console.log({lens:JSON.stringify(e.lens,null,2),zoomFactor:l})}}};try{c.displayName="TimelineProvider",c.__docgenInfo={description:"",displayName:"TimelineProvider",props:{contentLength:{defaultValue:null,description:"The total length of the content in milliseconds.",name:"contentLength",required:!0,type:{name:"number"}}}}}catch{}function d({timestampMilliseconds:e,className:t}){const{timeToRelative:s}=x();return u.jsx("div",{className:`absolute top-1/2 size-1 h-1 -translate-y-1/2 ${t}`,style:{left:`calc(${s(e)*100}% - 0.125rem)`}})}try{d.displayName="TimeDotMarker",d.__docgenInfo={description:"",displayName:"TimeDotMarker",props:{timestampMilliseconds:{defaultValue:null,description:"",name:"timestampMilliseconds",required:!0,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!0,type:{name:"string"}}}}}catch{}export{d as T,c as a,E as c,N as g,x as u};
